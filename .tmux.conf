# cat << EOF > /dev/null
# https://github.com/gpakosz/.tmux
# (‑●‑●)> dual licensed under the WTFPL v2 license and the MIT license,
#         without any warranty.
#         Copyright 2012— Gregory Pakosz (@gpakosz).
# /!\ do not edit this file
#     instead, override settings in ~/.tmux.conf.local, see README.md


# -- general -------------------------------------------------------------------

set -g default-terminal "screen-256color" # colors!
#setw -g xterm-keys on
set -g prefix2 C-a                        # GNU-Screen compatible prefix
bind C-a send-prefix -2
##

set -g history-limit 5000                 # boost history

#Binding the conf
bind r source-file ~/.tmux.conf \; display "Reloaded ~/.tmux.conf"  
#Terminal admin:
##-------------------------------------------------------#
##set mouse off/on - if off, forces you to use keyboard with prefix-[
## Enabling mouse mode allows you to:
## 1. Clickable window, panes, resizable panes
## 2. Scroll, search using "/" and then vim-copy
set -g mouse on

# start with window 1 (instead of 0)
set -g base-index 1
#  
# start with pane 1
set -g pane-base-index 1
# use vi mode
setw -g mode-keys vi
set -g status-keys vi

# allow utf8 support -- No need these configurations on tmux versions higher than 2.2
#set status-utf8 on
#setw -g utf8 on

#-------------------------------------------------------#
##Pane colours
##-------------------------------------------------------#
## set inactive/active window styles
set -g window-style 'fg=colour247,bg=colour236'
set -g window-active-style 'fg=colour255,bg=black'
set-window-option -g window-status-current-bg colour46
set-window-option -g window-status-current-fg colour196
#pane border
set -g pane-border-bg colour235
set -g pane-border-fg colour238
#set -g pane-active-border-bg colour196
#set -g pane-active-border-fg colour196
#set -g pane-active-border-bg default
set -g pane-active-border-fg colour208

#-------------------------------------------------------#
##PANE NAVIGATION/MANAGEMENT
##-------------------------------------------------------#
## splitting panes
bind \ split-window -h -c '#{pane_current_path}'
bind - split-window -v -c '#{pane_current_path}'
 
# open new panes in current path
bind c new-window -c '#{pane_current_path}'

# Use Alt-arrow keys WITHOUT PREFIX KEY to switch panes
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

#Resizing panes:
bind -r j resize-pane -D 3
bind -r k resize-pane -U 3
bind -r h resize-pane -L 3
bind -r l resize-pane -R 3

#-------------------------------------------------------#
##Pane copy/pasting using vi-mode
#-------------------------------------------------------#
unbind [
bind Escape copy-mode
unbind p
#bind C-v paste-buffer
bind p paste-buffer
# Use v to trigger selection    
bind-key -T copy-mode-vi v send-keys -X begin-selection
# Use y to yank current selection
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel
##-------------------------------------------------------#
#-------------------------------------------------------#
##Setting escape time delay to be smaller 
##to make tmux more responsive to commands
#
##-------------------------------------------------------#
set -s escape-time 1
##-------------------------------------------------------#
#-------------------------------------------------------#
## STATUS LINE/TOOLBAR AT BOTTOM OF SCREEN
##-------------------------------------------------------#
# Set background of status line to black
##-------------------------------------------------------#
set -g status-bg black
#set -g status-bg colour240
set -g status-fg white

#Colours for messages
##-------------------------------------------------------#
## enable activity alerts
setw -g monitor-activity on
set -g visual-activity on

#Show reloaded message in bright white
set -g message-fg white
set -g message-bg default
set -g message-attr bright
#-------------------------------------------------------#
#
# Status line left side
# #-------------------------------------------------------#
# # Session: 0 1 1 settings
set -g status-left-length 40 
set -g status-left "#[fg=colour245]Session: #S #[fg=colour84]#I #[fg=colour75]#P"
#-------------------------------------------------------#

#Window/pane type in centre
##-------------------------------------------------------#
##move bash* to centre
set -g status-justify centre
# set the color of the window list (name of the pane)
setw -g window-status-fg colour75
setw -g window-status-bg default 
setw -g window-status-attr dim
#-------------------------------------------------------#

#Time and date on right-hand side
##-------------------------------------------------------#
## Status line right side
## e.g. 28 Nov 18:15
set -g status-left "#[fg=colour245]%d %b #[fg=colour256] %R"
set -g window-active-style  'fg=colour46,bg=black'


# Update the status bar every sixty seconds (for the time)
set -g status-interval 60
#-------------------------------------------------------#
# 
# #-------------------------------------------------------#
# #END OF STATUS LINE MESSAGES
# #-------------------------------------------------------#

# maximize current pane
bind + run 'cut -c3- ~/.tmux.conf | sh -s _maximize_pane "#{session_name}" #D'

#activate tmux-resurrect
#run-shell ~/resurrect/resurrect.tmux
#set -g @resurrect-capture-pane-contents 'on'

#change defaults for resurrect (two steps)
##1. unbind the current defaults C-s and C-r
unbind-key -T prefix C-s
unbind-key -T prefix C-r

#2. Still use prefix C-s and C-r, but now ask for (y/n) response before saving/restoring.
##This assumes tmux-resurrect is saved to ~/build/tmux-resurrect folder
bind-key -T prefix C-s confirm-before -p 'Save this tmux session? (y/n)' 'run-shell ~/build/tmux/tmux-resurrect/scripts/save.sh'
bind-key -T prefix C-r confirm-before -p 'Resurrect last tmux session? (y/n)' 'run-shell ~/build/tmux/tmux-resurrect/scripts/restore.sh'

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

run '~/.tmux/plugins/tpm/tpm'
